# CAP-теорема и классификация баз данных  

CAP-теорема утверждает, что распределённая база данных не может одновременно обеспечивать все три свойства:  
- **C** (Consistency) – согласованность  
- **A** (Availability) – доступность  
- **P** (Partition Tolerance) – устойчивость к разделению сети  

Любая распределённая система должна выбрать два из трёх свойств.

## MongoDB – CP (Согласованность и Устойчивость к Разделению)  
MongoDB можно настроить по-разному, но в основном она ориентированна на **CP**-системам:  
- Гарантирует согласованность данных при репликации.  
- Может пожертвовать доступностью в случае разделения сети (например, если первичный узел недоступен, запись невозможна).  
- В режиме **Eventually Consistent Reads** (настроено чтение из реплик) можно достичь большего уровня доступности, но это ослабляет консистентность.  

## MSSQL – CA (Согласованность и Доступность)  
Microsoft SQL Server – это реляционная СУБД, изначально ориентированная на **CA**-модель:  
- Гарантирует строгую согласованность данных.  
- Обеспечивает высокую доступность при отсутствии сетевых разделений (например, за счёт кластерных решений AlwaysOn).  
- Не предназначена для работы в условиях распределённых систем с разбиением сети (отсутствие **P**).  

## Cassandra – AP (Доступность и Устойчивость к Разделению)  
Apache Cassandra спроектирована как **AP**-система:  
- Поддерживает отказоустойчивость при разбиении сети (реплицирует данные между узлами).  
- Гарантирует высокую доступность (всегда можно выполнять операции, даже при потере части узлов).  
- Жертвует строгой согласованностью (использует **eventual consistency** – данные синхронизируются со временем).  

---

### Итоговая таблица:  

| БД        | Категория (CAP) | Причина |
|-----------|---------------|----------|
| **MongoDB**  | **CP** | Обеспечивает согласованность и устойчивость к разделению, но может терять доступность. |
| **MSSQL**    | **CA** | Гарантирует согласованность и доступность, но не выдерживает сетевые разделения. |
| **Cassandra**| **AP** | Доступность и отказоустойчивость важнее строгой согласованности. |

Таким образом, выбор БД зависит от требований к системе: если важна строгая согласованность – лучше MongoDB или MSSQL, если нужна высокая доступность при распределённости – Cassandra.  

 
